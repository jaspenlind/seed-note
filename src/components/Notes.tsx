import React from "react";
import { flat, sharp, Accidential } from "../rules/Accidential";

export interface Coordinate {
  x: number;
  y: number;
}
export interface NoteProps extends Coordinate {
  accidential?: Accidential;
}

const style = { fill: "#000000", strokeWidth: 0.336731 };
const translate = (x: number, y: number) => `translate(${x}, ${y})`;

const shapes = {
  wholeNote:
    "m 61.246483,2 c -1.850972,-0.569701 -3.311428,-2.117849 -3.311428,-3.510288 0,-3.941179 8.465264,-5.500808 11.961215,-2.203714 3.78043,3.565405 -2.389057,7.640942 -8.649787,5.714002 z m 5.646374,-0.99009 c 1.029905,-1.571834 0.04522,-4.686089 -1.738647,-5.498879 -2.619695,-1.193612 -4.225475,0.84043 -3.134392,3.97033 0.754678,2.164882 3.825048,3.127982 4.873039,1.528549 z",
  sharp:
    "m 75.470977,116.92533 v -5.78086 l 2.39562,-0.67836 v 5.75136 z m 4.716975,-1.39852 -1.646988,0.48419 v -5.75135 l 1.646988,-0.47191 v -2.38902 l -1.646988,0.4719 v -5.87642 h -0.674367 v 6.05462 l -2.39562,0.70663 v -5.71421 H 74.83494 v 5.93173 l -1.646988,0.47313 v 2.39394 l 1.646988,-0.47191 v 5.7403 l -1.646988,0.47068 v 2.38411 l 1.646988,-0.4719 v 5.84324 h 0.636037 v -6.05217 l 2.39562,-0.6759 v 5.68471 h 0.674367 v -5.89854 l 1.646988,-0.47314 z",
  flat:
    "m 74.557759,89.459865 v 11.173195 c -10e-7,0 -10e-7,0.75315 0,2.25945 1.000767,-0.96497 2.12385,-1.45922 3.369254,-1.48277 0.778371,1e-5 1.445549,0.34128 2.001537,1.02381 0.48926,0.63548 0.745009,1.34156 0.767255,2.11824 0.02223,0.61194 -0.122321,1.31801 -0.433666,2.11824 -0.111202,0.3295 -0.355834,0.68254 -0.733896,1.05911 -0.289116,0.28244 -0.589347,0.57663 -0.900692,0.8826 -1.645712,1.27094 -3.291418,2.55364 -4.937125,3.84812 V 89.459865 h 0.867333 m 2.702075,14.209325 c -0.266875,-0.3295 -0.611584,-0.49425 -1.034127,-0.49425 -0.533746,0 -0.967412,0.31774 -1.301,0.95321 -0.244633,0.49425 -0.366949,1.65928 -0.366948,3.49508 v 3.03614 c 0.02224,0.0941 0.644938,-0.48249 1.868101,-1.7299 0.667176,-0.659 1.100842,-1.43569 1.300999,-2.33005 0.08895,-0.35304 0.133432,-0.70608 0.133436,-1.05912 -4e-6,-0.77669 -0.200158,-1.40039 -0.600461,-1.87111"
};

const Sharp = (coord: Coordinate) => {
  return (
    <g transform={translate(coord.x, coord.y)}>
      <path className="sharp" style={style} d={shapes.sharp} />
    </g>
  );
};

const Flat = (coord: Coordinate) => {
  return (
    <g transform={translate(coord.x, coord.y)}>
      <path className="flat" d={shapes.flat} style={style} />
    </g>
  );
};

export const WholeNote = (props: Partial<NoteProps>) => {
  const p = { ...{ x: 0, y: 0 }, ...props };
  const { x, y } = p;

  return (
    <g>
      <path className="note" transform={translate(x, y)} style={style} d={shapes.wholeNote} />
      {p.accidential === flat && <Flat x={x - 24} y={y - 107} />}
      {p.accidential === sharp && <Sharp x={x - 24} y={y - 113} />}
    </g>
  );
};
